<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>黄河水澄的技术专栏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="黄河水澄的技术专栏">
<meta property="og:url" content="https://debugtheuniverse.github.io/index.html">
<meta property="og:site_name" content="黄河水澄的技术专栏">
<meta property="og:locale">
<meta property="article:author" content="Jim Huang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="黄河水澄的技术专栏" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">黄河水澄的技术专栏</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">分享有用的知识</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Suche"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://DebugTheUniverse.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-OpenCV 图像处理" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/03/20/OpenCV%20%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" class="article-date">
  <time class="dt-published" datetime="2024-03-20T13:44:19.778Z" itemprop="datePublished">2024-03-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/03/20/OpenCV%20%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/">OpenCV 图像处理</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h5 id="1-更改图像颜色空间"><a href="#1-更改图像颜色空间" class="headerlink" title="1. 更改图像颜色空间"></a>1. 更改图像颜色空间</h5><p>使用<code>cv.cvtColor()</code>，输入：图像，方法（比如cv.COLOR_BGR2HSV）</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hsv = cv.cvtColor(img, cv.COLOR_BGR2HSV)</span><br></pre></td></tr></table></figure>

<h5 id="2-几何转换操作"><a href="#2-几何转换操作" class="headerlink" title="2. 几何转换操作"></a>2. 几何转换操作</h5><p>调整图像大小</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"> </span><br><span class="line">img = cv.imread(<span class="string">&#x27;ml.png&#x27;</span>)</span><br><span class="line"><span class="keyword">assert</span> img <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line"> </span><br><span class="line">res = cv.resize(img,<span class="literal">None</span>,fx=<span class="number">2</span>, fy=<span class="number">2</span>, interpolation = cv.INTER_CUBIC)</span><br><span class="line"> </span><br><span class="line"><span class="comment">#OR</span></span><br><span class="line"> </span><br><span class="line">height, width = img.shape[:<span class="number">2</span>]</span><br><span class="line">res = cv.resize(img,(<span class="number">2</span>*width, <span class="number">2</span>*height), interpolation = cv.INTER_CUBIC)</span><br></pre></td></tr></table></figure>
<p>使用<code>cv.warpAffine()</code>平移图片;<br>使用<code>cv.getRotationMatrix2D()</code>获取2x3旋转矩阵，如旋转90度</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"> </span><br><span class="line">img = cv.imread(<span class="string">&#x27;ml.png&#x27;</span>, cv.IMREAD_GRAYSCALE)</span><br><span class="line"><span class="keyword">assert</span> img <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line">rows,cols = img.shape</span><br><span class="line"> </span><br><span class="line"><span class="comment">#M = np.float32([[1,0,100],[0,1,50]]) # 平移矩阵</span></span><br><span class="line">M = cv.getRotationMatrix2D(((cols-<span class="number">1</span>)/<span class="number">2.0</span>,(rows-<span class="number">1</span>)/<span class="number">2.0</span>),<span class="number">90</span>,<span class="number">1</span>) <span class="comment"># 旋转矩阵</span></span><br><span class="line">dst = cv.warpAffine(img,M,(cols,rows)) <span class="comment"># 输入：图像，转换矩阵，尺寸（宽，高）</span></span><br><span class="line"> </span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>,dst)</span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<h5 id="3-仿射变换"><a href="#3-仿射变换" class="headerlink" title="3. 仿射变换"></a>3. 仿射变换</h5><p>在仿射变换中，原图中平行线在变换后仍然平行。<br>方法为使用<code>cv.getAffineTransform()</code>获取2x3的转换矩阵后传入<code>cv.warpAffine()</code><br>生成操作矩阵需要3组对应坐标</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">img = cv.imread(<span class="string">&#x27;ml.png&#x27;</span>)</span><br><span class="line"><span class="keyword">assert</span> img <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line">rows,cols,ch = img.shape</span><br><span class="line"> </span><br><span class="line">pts1 = np.float32([[<span class="number">50</span>,<span class="number">50</span>],[<span class="number">200</span>,<span class="number">50</span>],[<span class="number">50</span>,<span class="number">200</span>]])</span><br><span class="line">pts2 = np.float32([[<span class="number">10</span>,<span class="number">100</span>],[<span class="number">200</span>,<span class="number">50</span>],[<span class="number">100</span>,<span class="number">250</span>]])</span><br><span class="line"> </span><br><span class="line">M = cv.getAffineTransform(pts1,pts2)</span><br><span class="line"> </span><br><span class="line">dst = cv.warpAffine(img,M,(cols,rows))</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">121</span>),plt.imshow(img),plt.title(<span class="string">&#x27;Input&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">122</span>),plt.imshow(dst),plt.title(<span class="string">&#x27;Output&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h5 id="4-视角变换"><a href="#4-视角变换" class="headerlink" title="4. 视角变换"></a>4. 视角变换</h5><p>视角变换后直线还是直线。变换矩阵是3x3的，需要4组对应已知的坐标，其中不能存在3点共线，这样便能使用<code>cv.getPerspectiveTransform()</code>获得转换矩阵，然后矩阵传入<code>cv.warpPespective()</code>即可</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pts1 = np.float32([[<span class="number">56</span>,<span class="number">65</span>],[<span class="number">368</span>,<span class="number">52</span>],[<span class="number">28</span>,<span class="number">387</span>],[<span class="number">389</span>,<span class="number">390</span>]])</span><br><span class="line">pts2 = np.float32([[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">300</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">300</span>],[<span class="number">300</span>,<span class="number">300</span>]])</span><br><span class="line"> </span><br><span class="line">M = cv.getPerspectiveTransform(pts1,pts2)</span><br><span class="line"> </span><br><span class="line">dst = cv.warpPerspective(img,M,(<span class="number">300</span>,<span class="number">300</span>))</span><br></pre></td></tr></table></figure>

<h5 id="5-阈值处理"><a href="#5-阈值处理" class="headerlink" title="5. 阈值处理"></a>5. 阈值处理</h5><p>使用<code>cv.threshold()</code>，输入：图像（灰度），阈值，最大值（超阈值的设定为此），方法<br>返回：使用阈值, 阈值处理的图</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">img = cv.imread(<span class="string">&#x27;ml.png&#x27;</span>, cv.IMREAD_GRAYSCALE)</span><br><span class="line"><span class="keyword">assert</span> img <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line">ret,thresh1 = cv.threshold(img,<span class="number">127</span>,<span class="number">255</span>,cv.THRESH_BINARY)</span><br><span class="line">ret,thresh2 = cv.threshold(img,<span class="number">127</span>,<span class="number">255</span>,cv.THRESH_BINARY_INV)</span><br><span class="line">ret,thresh3 = cv.threshold(img,<span class="number">127</span>,<span class="number">255</span>,cv.THRESH_TRUNC)</span><br><span class="line">ret,thresh4 = cv.threshold(img,<span class="number">127</span>,<span class="number">255</span>,cv.THRESH_TOZERO)</span><br><span class="line">ret,thresh5 = cv.threshold(img,<span class="number">127</span>,<span class="number">255</span>,cv.THRESH_TOZERO_INV)</span><br><span class="line"> </span><br><span class="line">titles = [<span class="string">&#x27;Original Image&#x27;</span>,<span class="string">&#x27;BINARY&#x27;</span>,<span class="string">&#x27;BINARY_INV&#x27;</span>,<span class="string">&#x27;TRUNC&#x27;</span>,<span class="string">&#x27;TOZERO&#x27;</span>,<span class="string">&#x27;TOZERO_INV&#x27;</span>]</span><br><span class="line">images = [img, thresh1, thresh2, thresh3, thresh4, thresh5]</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line">    plt.subplot(<span class="number">2</span>,<span class="number">3</span>,i+<span class="number">1</span>),plt.imshow(images[i],<span class="string">&#x27;gray&#x27;</span>,vmin=<span class="number">0</span>,vmax=<span class="number">255</span>)</span><br><span class="line">    plt.title(titles[i])</span><br><span class="line">    plt.xticks([]),plt.yticks([])</span><br><span class="line"> </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>自适应阈值<br><code>cv.ADAPTIVE_THRESH_MEAN_C</code> 阈值 &#x3D; 邻域均值 - C<br><code>cv.ADAPTIVE_THRESH_GAUSSIAN_C</code> 阈值 &#x3D; 邻域高斯加权和均值 - C<br>blockSize决定领域大小，C是从邻域均值或加权均值中减去的常数</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">img = cv.imread(<span class="string">&#x27;ml.png&#x27;</span>, cv.IMREAD_GRAYSCALE)</span><br><span class="line"><span class="keyword">assert</span> img <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line">img = cv.medianBlur(img,<span class="number">5</span>)</span><br><span class="line"> </span><br><span class="line">ret,th1 = cv.threshold(img,<span class="number">127</span>,<span class="number">255</span>,cv.THRESH_BINARY)</span><br><span class="line">th2 = cv.adaptiveThreshold(img,<span class="number">255</span>,cv.ADAPTIVE_THRESH_MEAN_C,\</span><br><span class="line"> cv.THRESH_BINARY,<span class="number">11</span>,<span class="number">2</span>)</span><br><span class="line">th3 = cv.adaptiveThreshold(img,<span class="number">255</span>,cv.ADAPTIVE_THRESH_GAUSSIAN_C,\</span><br><span class="line"> cv.THRESH_BINARY,<span class="number">11</span>,<span class="number">2</span>)</span><br><span class="line"> </span><br><span class="line">titles = [<span class="string">&#x27;Original Image&#x27;</span>, <span class="string">&#x27;Global Thresholding (v = 127)&#x27;</span>,</span><br><span class="line"> <span class="string">&#x27;Adaptive Mean Thresholding&#x27;</span>, <span class="string">&#x27;Adaptive Gaussian Thresholding&#x27;</span>]</span><br><span class="line">images = [img, th1, th2, th3]</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line"> plt.subplot(<span class="number">2</span>,<span class="number">2</span>,i+<span class="number">1</span>),plt.imshow(images[i],<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line"> plt.title(titles[i])</span><br><span class="line"> plt.xticks([]),plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>大津二值化 Otsu’s Binarization<br>可以不需要选择一个数值作为阈值，从图像直方图确定全局最优阈值，该值通过最小化加权组内方差求得</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Otsu&#x27;s thresholding</span></span><br><span class="line">ret2,th2 = cv.threshold(img,<span class="number">0</span>,<span class="number">255</span>,cv.THRESH_BINARY+cv.THRESH_OTSU)</span><br></pre></td></tr></table></figure>

<h5 id="6-图像平滑（卷积）"><a href="#6-图像平滑（卷积）" class="headerlink" title="6. 图像平滑（卷积）"></a>6. 图像平滑（卷积）</h5><p><code>cv.filter2D()</code>实现卷积</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">img = cv.imread(<span class="string">&#x27;ml.png&#x27;</span>)</span><br><span class="line"><span class="keyword">assert</span> img <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line"> </span><br><span class="line">kernel = np.ones((<span class="number">5</span>,<span class="number">5</span>),np.float32)/<span class="number">25</span>   <span class="comment"># 平均kernel</span></span><br><span class="line">dst = cv.filter2D(img,-<span class="number">1</span>,kernel)</span><br><span class="line"></span><br><span class="line">blr = cv.blur()</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">121</span>),plt.imshow(img),plt.title(<span class="string">&#x27;Original&#x27;</span>)</span><br><span class="line">plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">122</span>),plt.imshow(dst),plt.title(<span class="string">&#x27;Averaging&#x27;</span>)</span><br><span class="line">plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>图像过滤模糊的一些常用函数</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">img = cv.imread(<span class="string">&#x27;ml.png&#x27;</span>)</span><br><span class="line"><span class="keyword">assert</span> img <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line"> </span><br><span class="line">kernel = np.ones((<span class="number">5</span>,<span class="number">5</span>),np.float32)/<span class="number">25</span></span><br><span class="line">dst = cv.filter2D(img,-<span class="number">1</span>,kernel)</span><br><span class="line"></span><br><span class="line">blr = cv.blur(img,(<span class="number">5</span>,<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">g_blr = cv.GaussianBlur(img, (<span class="number">5</span>,<span class="number">5</span>),<span class="number">0</span>)   <span class="comment"># 高斯模糊：最后参数σx和σy</span></span><br><span class="line"></span><br><span class="line">m_blr = cv.medianBlur(img, <span class="number">5</span>)   <span class="comment"># 有效消除椒盐噪声</span></span><br><span class="line"></span><br><span class="line">bi_blr = cv.bilateralFilter(img,<span class="number">9</span>, <span class="number">75</span>, <span class="number">75</span>)  <span class="comment"># 由一个空间高斯方程和一个像素差异方程组成，可以实现去纹理而存边界</span></span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">321</span>),plt.imshow(img),plt.title(<span class="string">&#x27;Original&#x27;</span>)</span><br><span class="line">plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">322</span>),plt.imshow(dst),plt.title(<span class="string">&#x27;Averaging&#x27;</span>)</span><br><span class="line">plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">323</span>),plt.imshow(blr),plt.title(<span class="string">&#x27;Bluring&#x27;</span>)</span><br><span class="line">plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">324</span>),plt.imshow(g_blr),plt.title(<span class="string">&#x27;gaussian&#x27;</span>)</span><br><span class="line">plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">325</span>),plt.imshow(m_blr),plt.title(<span class="string">&#x27;medianBlur&#x27;</span>)</span><br><span class="line">plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">326</span>),plt.imshow(bi_blr),plt.title(<span class="string">&#x27;Bilaterial filtering&#x27;</span>)</span><br><span class="line">plt.xticks([]), plt.yticks([])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h5 id="7-形态学操作"><a href="#7-形态学操作" class="headerlink" title="7. 形态学操作"></a>7. 形态学操作</h5><p>腐蚀：使用一个kernel扫过二值图片每一个角落，其下所有像素都1时候保留中心位置在原图对应的像素，否则被“腐蚀”为0</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"> </span><br><span class="line">img = cv.imread(<span class="string">&#x27;ml.png&#x27;</span>, cv.IMREAD_GRAYSCALE)</span><br><span class="line"><span class="keyword">assert</span> img <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line">kernel = np.ones((<span class="number">5</span>,<span class="number">5</span>),np.uint8)</span><br><span class="line">erosion = cv.erode(img,kernel,iterations = <span class="number">1</span>) <span class="comment"># 腐蚀</span></span><br><span class="line">dilation = cv.dilate(img,kernel,iterations = <span class="number">1</span>) <span class="comment"># 膨胀：但凡kernel下面有个数值都将kernel中心位置像素设为1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开运算 腐蚀后膨胀    可用于去噪</span></span><br><span class="line">opening = cv.morphologyEx(img, cv.MORPH_OPEN, kernel)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 闭运算 膨胀后腐蚀    用于消除形状内部的小孔</span></span><br><span class="line">closing = cv.morphologyEx(img, cv.MORPH_CLOSE, kernel)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 梯度 膨胀与腐蚀的差异 结果看起来像图形的外轮廓</span></span><br><span class="line">gradient = cv.morphologyEx(img, cv.MORPH_GRADIENT, kernel)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Top Hat 输入图像与开运算的差异</span></span><br><span class="line">tophat = cv.morphologyEx(img, cv.MORPH_TOPHAT, kernel)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Black Hat 输入图像与闭运算的差异</span></span><br><span class="line">blackhat = cv.morphologyEx(img, cv.MORPH_BLACKHAT, kernel)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用<code>cv.getStructuringElement()</code>生成结构化kernel，输入形状和尺寸元组即可</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kernel = cv.getStructuringElement(cv.MORPH_RECT,(<span class="number">5</span>,<span class="number">5</span>))  <span class="comment"># 矩形的</span></span><br><span class="line"><span class="built_in">print</span>(kernel)</span><br><span class="line">cv.getStructuringElement(cv.MORPH_ELLIPSE,(<span class="number">5</span>,<span class="number">5</span>))    <span class="comment"># 椭圆形的</span></span><br><span class="line">cv.getStructuringElement(cv.MORPH_CROSS,(<span class="number">5</span>,<span class="number">5</span>))  <span class="comment">#   十字形的</span></span><br></pre></td></tr></table></figure>
<h5 id="8-图像梯度"><a href="#8-图像梯度" class="headerlink" title="8. 图像梯度"></a>8. 图像梯度</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">img = cv.imread(<span class="string">&#x27;ml.png&#x27;</span>, cv.IMREAD_GRAYSCALE)</span><br><span class="line"><span class="keyword">assert</span> img <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line"> </span><br><span class="line">laplacian = cv.Laplacian(img,cv.CV_64F)</span><br><span class="line">sobelx = cv.Sobel(img,cv.CV_64F,<span class="number">1</span>,<span class="number">0</span>,ksize=<span class="number">5</span>)</span><br><span class="line">sobely = cv.Sobel(img,cv.CV_64F,<span class="number">0</span>,<span class="number">1</span>,ksize=<span class="number">5</span>)</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>),plt.imshow(img,cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Original&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>),plt.imshow(laplacian,cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Laplacian&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>),plt.imshow(sobelx,cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Sobel X&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>),plt.imshow(sobely,cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Sobel Y&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line"> </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>特别注意：将输出的数据类型设定高一些，如cv.CV_64F等，再转为cv.CV_8U，可避免丢失信息</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">img = cv.imread(<span class="string">&#x27;opencv.png&#x27;</span>, cv.IMREAD_GRAYSCALE)</span><br><span class="line"><span class="keyword">assert</span> img <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># Output dtype = cv.CV_8U</span></span><br><span class="line"><span class="comment">#sobelx8u = cv.Sobel(img,cv.CV_8U,1,0,ksize=3)</span></span><br><span class="line">sobelx8u = cv.Laplacian(img,cv.CV_8U)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Output dtype = cv.CV_64F. Then take its absolute and convert to cv.CV_8U</span></span><br><span class="line"><span class="comment">#sobelx64f = cv.Sobel(img,cv.CV_64F,1,0,ksize=3)</span></span><br><span class="line">sobelx64f = cv.Laplacian(img,cv.CV_64F)</span><br><span class="line">abs_sobel64f = np.absolute(sobelx64f)</span><br><span class="line">sobel_8u = np.uint8(abs_sobel64f)</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>),plt.imshow(img,cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Original&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>),plt.imshow(sobelx8u,cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Sobel CV_8U&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>),plt.imshow(sobel_8u,cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Sobel abs(CV_64F)&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line"> </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h5 id="9-图像金字塔"><a href="#9-图像金字塔" class="headerlink" title="9. 图像金字塔"></a>9. 图像金字塔</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lower_reso = cv.pyrDown(higher_reso)    <span class="comment"># 下取样</span></span><br><span class="line"></span><br><span class="line">higher_reso2 = cv.pyrUp(lower_reso)     <span class="comment"># 上取样</span></span><br></pre></td></tr></table></figure>
<p>使用金字塔操作混合两个图片的例子</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np,sys</span><br><span class="line"> </span><br><span class="line">A = cv.imread(<span class="string">&#x27;opencv.png&#x27;</span>)</span><br><span class="line">B = cv.imread(<span class="string">&#x27;opencv_white.png&#x27;</span>)</span><br><span class="line"><span class="keyword">assert</span> A <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line"><span class="keyword">assert</span> B <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># generate Gaussian pyramid for A</span></span><br><span class="line">G = A.copy()</span><br><span class="line">gpA = [G]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line"> G = cv.pyrDown(G)</span><br><span class="line"> gpA.append(G)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># generate Gaussian pyramid for B</span></span><br><span class="line">G = B.copy()</span><br><span class="line">gpB = [G]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line"> G = cv.pyrDown(G)</span><br><span class="line"> gpB.append(G)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># generate Laplacian Pyramid for A</span></span><br><span class="line">lpA = [gpA[<span class="number">5</span>]]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>,<span class="number">0</span>,-<span class="number">1</span>):</span><br><span class="line"> GE = cv.pyrUp(gpA[i])</span><br><span class="line"> L = gpA[i-<span class="number">1</span>] - GE</span><br><span class="line"> lpA.append(L)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># generate Laplacian Pyramid for B</span></span><br><span class="line">lpB = [gpB[<span class="number">5</span>]]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>,<span class="number">0</span>,-<span class="number">1</span>):</span><br><span class="line"> GE = cv.pyrUp(gpB[i])</span><br><span class="line"> L = gpB[i-<span class="number">1</span>] - GE</span><br><span class="line"> lpB.append(L)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Now add left and right halves of images in each level</span></span><br><span class="line">LS = []</span><br><span class="line"><span class="keyword">for</span> la,lb <span class="keyword">in</span> <span class="built_in">zip</span>(lpA,lpB):</span><br><span class="line"> rows,cols,dpt = la.shape</span><br><span class="line"> ls = np.hstack((la[:,<span class="number">0</span>:cols//<span class="number">2</span>], lb[:,cols//<span class="number">2</span>:]))</span><br><span class="line"> LS.append(ls)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># now reconstruct</span></span><br><span class="line">ls_ = LS[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">6</span>):</span><br><span class="line"> ls_ = cv.pyrUp(ls_)</span><br><span class="line"> ls_ = cv.add(ls_, LS[i])</span><br><span class="line"> </span><br><span class="line"><span class="comment"># image with direct connecting each half</span></span><br><span class="line">real = np.hstack((A[:,:cols//<span class="number">2</span>],B[:,cols//<span class="number">2</span>:]))</span><br><span class="line"> </span><br><span class="line">cv.imshow(<span class="string">&#x27;Pyramid_blending2.jpg&#x27;</span>,ls_)</span><br><span class="line">cv.imshow(<span class="string">&#x27;Direct_blending.jpg&#x27;</span>,real)</span><br><span class="line"></span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h5 id="10-Canny-边缘检测"><a href="#10-Canny-边缘检测" class="headerlink" title="10. Canny 边缘检测"></a>10. Canny 边缘检测</h5><p>求梯度，边缘与梯度法线垂直，判断边缘点在梯度方向是否为局部最大值，是则保留，否则置零（非极大值抑制）；下一步，小于最小值不认为是边缘，大于最大值是确定边缘，位于其间而又与确定边缘相连的也予以保留，否则舍弃。<br>使用<code>cv.Canny()</code>，输入：图像，最小值，最大值，用于算梯度的Sobel kernel 尺寸（默认3），L2gradient(True 全面公式较精确，False 默认的简化公式)</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">img = cv.imread(<span class="string">&#x27;ml.png&#x27;</span>, cv.IMREAD_GRAYSCALE)</span><br><span class="line"><span class="keyword">assert</span> img <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line">edges = cv.Canny(img,<span class="number">100</span>,<span class="number">180</span>)</span><br><span class="line"> </span><br><span class="line">plt.subplot(<span class="number">121</span>),plt.imshow(img,cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Original Image&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">122</span>),plt.imshow(edges,cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Edge Image&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line"> </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://debugtheuniverse.github.io/2024/03/20/OpenCV%20%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" data-id="cltzuur5n0001mcuk7dabhpeq" data-title="OpenCV 图像处理" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-OpenCV 快速使用" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/03/20/OpenCV%20%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8/" class="article-date">
  <time class="dt-published" datetime="2024-03-19T16:06:12.810Z" itemprop="datePublished">2024-03-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/03/20/OpenCV%20%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8/">OpenCV 快速使用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h5 id="1-安装opencv"><a href="#1-安装opencv" class="headerlink" title="1. 安装opencv"></a>1. 安装opencv</h5><p>在windows系统中，打开cmd窗口，输入如下代码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install opencv-contrib-python -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>
<p>使用contrib版本的功能要全面一些，后面的-i及其后是使用清华的源进行下载，会快很多。</p>
<p>检查是否安装成功</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="built_in">print</span>(cv.__version__)   <span class="comment"># 正常则显示版本号，我的例子是&#x27;4.9.0&#x27;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-基础绘制功能"><a href="#2-基础绘制功能" class="headerlink" title="2. 基础绘制功能"></a>2. 基础绘制功能</h5><p><code>cv.line(), cv.circle() , cv.rectangle(), cv.ellipse(), cv.putText()</code>分别用来在图片上绘制直线、圆形、矩形、椭圆、添加文字。他们的参数非常类似，都包含如下几个</p>
<ul>
<li>img: 绘制图形的目标图片</li>
<li>color: 绘制什么颜色的图形</li>
<li>thickness: 线条的粗细</li>
<li>lineType: 线型 （没发现区别）</li>
</ul>
<p>举个例子</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 创建一个黑色图片</span></span><br><span class="line">img = np.zeros((<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>), np.uint8)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 画一条蓝色对角线，注意颜色排序是BGR，所以（255，0，0）是蓝色</span></span><br><span class="line">cv.line(img,(<span class="number">0</span>,<span class="number">0</span>),(<span class="number">500</span>,<span class="number">500</span>),(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>),<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 画矩形</span></span><br><span class="line">cv.rectangle(img, (<span class="number">200</span>, <span class="number">200</span>), (<span class="number">280</span>, <span class="number">300</span>), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 圆，指定圆心坐标（300，100），半径100，颜色.., 线宽2</span></span><br><span class="line">cv.circle(img, (<span class="number">300</span>, <span class="number">100</span>), <span class="number">100</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#椭圆：图像，椭圆中心，（长轴长度，短轴长度），角度，弧起角度，弧结束角度，（B, G, R), 线宽</span></span><br><span class="line">cv.ellipse(img, (<span class="number">100</span>, <span class="number">300</span>), (<span class="number">50</span>, <span class="number">30</span>), <span class="number">60</span>, <span class="number">0</span>, <span class="number">360</span>, (<span class="number">255</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pts = np.array([[<span class="number">10</span>,<span class="number">5</span>],[<span class="number">20</span>,<span class="number">30</span>],[<span class="number">70</span>,<span class="number">20</span>],[<span class="number">50</span>,<span class="number">10</span>]], np.int32)</span><br><span class="line">pts = pts.reshape((-<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制多段线，第三个isClosed 如果设为True，可以自动将多段线闭合成多边形</span></span><br><span class="line">cv.polylines(img, [pts], <span class="literal">False</span>, (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加文字</span></span><br><span class="line">font = cv.FONT_HERSHEY_COMPLEX</span><br><span class="line">cv.putText(img, <span class="string">&#x27;hello world&#x27;</span>, (<span class="number">40</span>, <span class="number">460</span>),font, <span class="number">1</span>, (<span class="number">0x11</span>,<span class="number">0xaa</span>,<span class="number">0x11</span>),<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cv.imshow(<span class="string">&#x27;draw&#x27;</span>, img)</span><br><span class="line"></span><br><span class="line">cv.waitKey(<span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>

<h5 id="3-用鼠标绘制"><a href="#3-用鼠标绘制" class="headerlink" title="3. 用鼠标绘制"></a>3. 用鼠标绘制</h5><p>鼠标点击左键，绘制圆形。其中使用到了<code>cv.setMouseCallback</code>来为图像设置回调函数，回调函数<code>draw_cicle</code>接收<code>event</code>以及事件发生时的xy坐标，函数内判断事件类型，进行处理。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"> </span><br><span class="line"><span class="comment"># mouse callback function</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_circle</span>(<span class="params">event,x,y,flags,param</span>):</span><br><span class="line">    <span class="keyword">if</span> event == cv.EVENT_LBUTTONDOWN:</span><br><span class="line">        cv.circle(img,(x,y),<span class="number">100</span>,(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>),-<span class="number">1</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Create a black image, a window and bind the function to window</span></span><br><span class="line">img = np.zeros((<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>), np.uint8)</span><br><span class="line">cv.namedWindow(<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">cv.setMouseCallback(<span class="string">&#x27;image&#x27;</span>,draw_circle)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>):</span><br><span class="line">    cv.imshow(<span class="string">&#x27;image&#x27;</span>,img)</span><br><span class="line">    <span class="keyword">if</span> cv.waitKey(<span class="number">20</span>) &amp; <span class="number">0xFF</span> == <span class="number">27</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<p>更高级的例子，使用m键切换模式，鼠标点击后拖动绘制矩形和圆形。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"> </span><br><span class="line">drawing = <span class="literal">False</span> <span class="comment"># true if mouse is pressed</span></span><br><span class="line">mode = <span class="literal">True</span> <span class="comment"># if True, draw rectangle. Press &#x27;m&#x27; to toggle to curve</span></span><br><span class="line">ix,iy = -<span class="number">1</span>,-<span class="number">1</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># mouse callback function</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_circle</span>(<span class="params">event,x,y,flags,param</span>):</span><br><span class="line">    <span class="keyword">global</span> ix,iy,drawing,mode</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> event == cv.EVENT_LBUTTONDOWN:</span><br><span class="line">        drawing = <span class="literal">True</span></span><br><span class="line">        ix,iy = x,y</span><br><span class="line"></span><br><span class="line">    <span class="keyword">elif</span> event == cv.EVENT_MOUSEMOVE:</span><br><span class="line">        <span class="keyword">if</span> drawing == <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">if</span> mode == <span class="literal">True</span>:</span><br><span class="line">                cv.rectangle(img,(ix,iy),(x,y),(<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>),-<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cv.circle(img,(ix,iy),<span class="built_in">int</span>(<span class="built_in">abs</span>(math.sqrt((x-ix)**<span class="number">2</span>+(y-iy)**<span class="number">2</span>))),(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>),-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">elif</span> event == cv.EVENT_LBUTTONUP:</span><br><span class="line">        drawing = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> mode == <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">            <span class="comment">#cv.rectangle(img,(ix,iy),(x,y),(0,255,0),-1)</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">            <span class="comment">#cv.circle(img,(x,y),5,(0,0,255),-1)</span></span><br><span class="line"></span><br><span class="line">img = np.zeros((<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>), np.uint8)</span><br><span class="line">cv.namedWindow(<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">cv.setMouseCallback(<span class="string">&#x27;image&#x27;</span>,draw_circle)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>):</span><br><span class="line">    cv.imshow(<span class="string">&#x27;image&#x27;</span>,img)</span><br><span class="line">    k = cv.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span></span><br><span class="line">    <span class="keyword">if</span> k == <span class="built_in">ord</span>(<span class="string">&#x27;m&#x27;</span>):</span><br><span class="line">        mode = <span class="keyword">not</span> mode</span><br><span class="line">    <span class="keyword">elif</span> k == <span class="number">27</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"> </span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>

<h5 id="4-TrackBar使用"><a href="#4-TrackBar使用" class="headerlink" title="4. TrackBar使用"></a>4. TrackBar使用</h5><p>使用<code>cv.createTrackBar()</code>创建控制条，输入参数为：控制条名称、窗口名称、初始值、最大值、回调函数<br>使用<code>cv.getTrackBarPos()</code>获取控制条当前位置，输入参数：控制条名称、窗口名称<br>OpenCV里面没有按钮，因此可以创建一个最大值为1的控制条，作为开关使用</p>
<p>举个例子，带有开关的调色板</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">nothing</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># Create a black image, a window</span></span><br><span class="line">img = np.zeros((<span class="number">300</span>,<span class="number">512</span>,<span class="number">3</span>), np.uint8)</span><br><span class="line">cv.namedWindow(<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># create trackbars for color change</span></span><br><span class="line">cv.createTrackbar(<span class="string">&#x27;R&#x27;</span>,<span class="string">&#x27;image&#x27;</span>,<span class="number">128</span>,<span class="number">255</span>,nothing)</span><br><span class="line"> </span><br><span class="line">cv.createTrackbar(<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;image&#x27;</span>,<span class="number">0</span>,<span class="number">255</span>,nothing)</span><br><span class="line">cv.createTrackbar(<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;image&#x27;</span>,<span class="number">0</span>,<span class="number">255</span>,nothing)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># create switch for ON/OFF functionality</span></span><br><span class="line">switch = <span class="string">&#x27;0 : OFF \n1 : ON&#x27;</span></span><br><span class="line">cv.createTrackbar(switch, <span class="string">&#x27;image&#x27;</span>,<span class="number">0</span>,<span class="number">1</span>,nothing)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>):</span><br><span class="line">    cv.imshow(<span class="string">&#x27;image&#x27;</span>,img)</span><br><span class="line">    k = cv.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span></span><br><span class="line">    <span class="keyword">if</span> k == <span class="number">27</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># get current positions of four trackbars</span></span><br><span class="line">    r = cv.getTrackbarPos(<span class="string">&#x27;R&#x27;</span>,<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">    g = cv.getTrackbarPos(<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">    b = cv.getTrackbarPos(<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">    s = cv.getTrackbarPos(switch,<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> s == <span class="number">0</span>:</span><br><span class="line">        img[:] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        img[:] = [b,g,r]</span><br><span class="line"> </span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>

<p>更复杂一些的例子，使用控制条改变绘制的颜色画笔尺寸</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"> </span><br><span class="line">drawing = <span class="literal">False</span> <span class="comment"># true if mouse is pressed</span></span><br><span class="line">mode = <span class="literal">True</span> <span class="comment"># if True, draw rectangle. Press &#x27;m&#x27; to toggle to curve</span></span><br><span class="line">ix,iy = -<span class="number">1</span>,-<span class="number">1</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># mouse callback function</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_circle</span>(<span class="params">event,x,y,flags,param</span>):</span><br><span class="line">    <span class="keyword">global</span> ix,iy,drawing,mode</span><br><span class="line">    r = cv.getTrackbarPos(<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">    g = cv.getTrackbarPos(<span class="string">&#x27;g&#x27;</span>,<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">    b = cv.getTrackbarPos(<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">    b_size = cv.getTrackbarPos(<span class="string">&#x27;brush_size&#x27;</span>,<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> event == cv.EVENT_LBUTTONDOWN:</span><br><span class="line">        drawing = <span class="literal">True</span></span><br><span class="line">        ix,iy = x,y</span><br><span class="line">        <span class="keyword">if</span> mode == <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            cv.circle(img,(x,y),b_size,(b,g,r),-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">elif</span> event == cv.EVENT_MOUSEMOVE:</span><br><span class="line">        <span class="keyword">if</span> drawing == <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">if</span> mode == <span class="literal">True</span>:</span><br><span class="line">                cv.rectangle(img,(ix,iy),(x,y),(b,g,r),-<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cv.circle(img,(ix,iy),<span class="built_in">int</span>(<span class="built_in">abs</span>(math.sqrt((x-ix)**<span class="number">2</span>+(y-iy)**<span class="number">2</span>))),(b,g,r),-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">elif</span> event == cv.EVENT_LBUTTONUP:</span><br><span class="line">        drawing = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> mode == <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">            <span class="comment">#cv.rectangle(img,(ix,iy),(x,y),(0,255,0),-1)</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">            <span class="comment">#cv.circle(img,(x,y),5,(0,0,255),-1)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">nothing</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">img = np.zeros((<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>), np.uint8)</span><br><span class="line">cv.namedWindow(<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">cv.setMouseCallback(<span class="string">&#x27;image&#x27;</span>,draw_circle)</span><br><span class="line"></span><br><span class="line">cv.createTrackbar(<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;image&#x27;</span>, <span class="number">0</span>, <span class="number">255</span>, nothing)</span><br><span class="line">cv.createTrackbar(<span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;image&#x27;</span>, <span class="number">0</span>, <span class="number">255</span>, nothing)</span><br><span class="line">cv.createTrackbar(<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;image&#x27;</span>, <span class="number">0</span>, <span class="number">255</span>, nothing)</span><br><span class="line">cv.createTrackbar(<span class="string">&#x27;brush_size&#x27;</span>, <span class="string">&#x27;image&#x27;</span>, <span class="number">0</span>, <span class="number">100</span>, nothing)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>):</span><br><span class="line">    cv.imshow(<span class="string">&#x27;image&#x27;</span>,img)</span><br><span class="line">    k = cv.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> k == <span class="built_in">ord</span>(<span class="string">&#x27;m&#x27;</span>):</span><br><span class="line">        mode = <span class="keyword">not</span> mode</span><br><span class="line">    <span class="keyword">elif</span> k == <span class="number">27</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"> </span><br><span class="line">cv.destroyAllWindows()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="5-像素-通道-边框操作"><a href="#5-像素-通道-边框操作" class="headerlink" title="5. 像素&#x2F;通道&#x2F;边框操作"></a>5. 像素&#x2F;通道&#x2F;边框操作</h5><ul>
<li>单像素操作首选<code>array.item()</code>和<code>array.itemset()</code></li>
<li>通道操作直接用numpy切片选择</li>
<li>roi不是复制，是view，因此roi的修改会改变原图数据</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">img = cv.imread(<span class="string">&#x27;bottle.png&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span> img <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, checks with os.path.exists()&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 索引某个像素点</span></span><br><span class="line">px = img[<span class="number">100</span>,<span class="number">100</span>]</span><br><span class="line"><span class="built_in">print</span>(px)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 索引某个像素点的蓝色值</span></span><br><span class="line">px_blue = img[<span class="number">100</span>,<span class="number">100</span>,<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(px_blue)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改某个像素点的数值</span></span><br><span class="line">img[<span class="number">100</span>,<span class="number">100</span>] = [<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实际上使用Numpy的array.item()和array.itemset()做以上操作会更好</span></span><br><span class="line"><span class="built_in">print</span>(img.item(<span class="number">50</span>,<span class="number">50</span>,<span class="number">0</span>))</span><br><span class="line">img.itemset((<span class="number">50</span>,<span class="number">50</span>,<span class="number">2</span>),<span class="number">255</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取图像尺寸，可以通过有无通道数判断是否彩色，返回tuple （高，宽，通道数）</span></span><br><span class="line"><span class="built_in">print</span>(img.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取图像大小，即以上尺寸的乘积</span></span><br><span class="line"><span class="built_in">print</span>(img.size)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图像的数据类型，有很多错误就是由于数据类型不匹配造成的</span></span><br><span class="line"><span class="built_in">print</span>(img.dtype)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ROI选择，将一个区域移动到另外一个区域</span></span><br><span class="line">obj = img[<span class="number">280</span>:<span class="number">340</span>, <span class="number">330</span>:<span class="number">390</span>]</span><br><span class="line">obj[:,:,:] = <span class="number">0</span> <span class="comment"># obj是numpy的一个选择，没有copy，修改之会影响img</span></span><br><span class="line">img[<span class="number">273</span>:<span class="number">333</span>, <span class="number">100</span>:<span class="number">160</span>] = obj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将彩色图像按通道拆分、组合</span></span><br><span class="line">b, g, r = cv.split(img)</span><br><span class="line">img = cv.merge((b,g,r))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意cv.split耗时，不如使用numpy切片实现</span></span><br><span class="line">img[:,:,<span class="number">2</span>] = <span class="number">255</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 给图片加边，这在卷积模型中常用到，使用cv.copyMakeBorder(),输入：目标图、上、下、左、右宽、类型、颜色（常量类型）</span></span><br><span class="line"><span class="comment"># 类型分为：</span></span><br><span class="line"><span class="comment"># cv.BORDER_CONSTANT常量填充</span></span><br><span class="line"><span class="comment"># cv.BORDER_REFLECT镜像填充如：fedcba|abcdefgh|hgfedcb</span></span><br><span class="line"><span class="comment"># cv.BORDER_REFLECT_101镜像填充如：fedcb|abcdefgh|gfedcb</span></span><br><span class="line"><span class="comment"># cv.BORDER_REPLICATE最后元素重复如：aaaaaa|abcdefgh|hhhhhhh</span></span><br><span class="line"><span class="comment"># cv.BORDER_WRAP头尾相接填充如：cdefgh|abcdefgh|abcdefg</span></span><br><span class="line">img = cv.copyMakeBorder(img,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>,cv.BORDER_WRAP)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cv.namedWindow(<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;image&#x27;</span>,img)</span><br><span class="line"></span><br><span class="line">cv.waitKey(<span class="number">2000</span>)</span><br><span class="line"></span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>

<h5 id="6-图像相加与混合"><a href="#6-图像相加与混合" class="headerlink" title="6. 图像相加与混合"></a>6. 图像相加与混合</h5><p>与普通相加的区别，使用<code>cv.add()</code>相加结果大于数据类型范围会设为最大值。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line">x = np.array(<span class="number">250</span>, dtype=np.uint8)</span><br><span class="line">y = np.array(<span class="number">10</span>, dtype=np.uint8)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(cv.add(x,y)) <span class="comment"># x + y = 260 &gt; 255(uint8) 因此 [[255]]</span></span><br><span class="line"><span class="built_in">print</span>(x+y)  <span class="comment"># 260 % 256 = 4 因此 4</span></span><br></pre></td></tr></table></figure>

<p>使用<code>cv.addWighted()</code>将两个图片混合起来，</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line">img1 = cv.imread(<span class="string">&#x27;ml.png&#x27;</span>)</span><br><span class="line">img2 = cv.imread(<span class="string">&#x27;opencv.png&#x27;</span>)</span><br><span class="line"><span class="keyword">assert</span> img1 <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line"><span class="keyword">assert</span> img2 <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  输入 图像1，系数1，图像2， 系数2，γ</span></span><br><span class="line"><span class="comment"># 系数1 + 系数2 = 1</span></span><br><span class="line"><span class="comment"># γ是添加到每个像素的标量</span></span><br><span class="line">dst = cv.addWeighted(img1,<span class="number">0.6</span>,img2,<span class="number">0.4</span>,<span class="number">0</span>)</span><br><span class="line"> </span><br><span class="line">cv.imshow(<span class="string">&#x27;dst&#x27;</span>,dst)</span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>

<p>按位操作 Bitwise Operations<br>以下是实现将一个logo扣出来贴到另一个图片的例子</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读两张图片</span></span><br><span class="line">img1 = cv.imread(<span class="string">&#x27;bottle.png&#x27;</span>)</span><br><span class="line">img2 = cv.imread(<span class="string">&#x27;opencv.png&#x27;</span>)</span><br><span class="line"><span class="keyword">assert</span> img1 <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line"><span class="keyword">assert</span> img2 <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&quot;file could not be read, check with os.path.exists()&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 准备让logo出现在图片的左上，所以创建一个ROI</span></span><br><span class="line">rows,cols,channels = img2.shape</span><br><span class="line">roi = img1[<span class="number">0</span>:rows, <span class="number">0</span>:cols]</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 做一个logo的mask，及非logo区域的mask</span></span><br><span class="line">img2gray = cv.cvtColor(img2,cv.COLOR_BGR2GRAY)</span><br><span class="line">ret, mask = cv.threshold(img2gray, <span class="number">10</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">mask_inv = cv.bitwise_not(mask) <span class="comment"># 按位非操作实现非logo区域mask</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 将ROI中logo的图像去掉</span></span><br><span class="line">img1_bg = cv.bitwise_and(roi,roi,mask = mask_inv)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img1_bg&#x27;</span>,img1_bg)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从logo图片中只提取logo的部分</span></span><br><span class="line">img2_fg = cv.bitwise_and(img2,img2,mask = mask)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img2_fg&#x27;</span>,img2_fg)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将提取的logo图形与已经去掉图形的背景图相加</span></span><br><span class="line">dst = cv.add(img1_bg,img2_fg)</span><br><span class="line">img1[<span class="number">0</span>:rows, <span class="number">0</span>:cols ] = dst</span><br><span class="line"> </span><br><span class="line">cv.imshow(<span class="string">&#x27;res&#x27;</span>,img1)</span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="7-性能检查与优化"><a href="#7-性能检查与优化" class="headerlink" title="7. 性能检查与优化"></a>7. 性能检查与优化</h5><p>使用<code>cv.getTickCount()</code>获取时钟周期，在要判断耗时的程序前后各获取一次，求差<br>使用<code>cv.getTickFrequency()</code>获取时钟频率，耗时（秒） &#x3D; 周期数量 &#x2F; 频率</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line">e1 = cv.getTickCount()  <span class="comment"># 使用time也是一样的</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;do something&#x27;</span>)</span><br><span class="line"></span><br><span class="line">e2 = cv.getTickCount()</span><br><span class="line">t = (e2 - e1) / cv.getTickFrequency()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(t)</span><br></pre></td></tr></table></figure>

<p>性能优化</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="comment">#cv.setUseOptimized(False)  # 默认开了优化，可以手动开关</span></span><br><span class="line">img = cv.imread(<span class="string">&#x27;ml.png&#x27;</span>)</span><br><span class="line">e1 = cv.getTickCount()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>, <span class="number">49</span>, <span class="number">2</span>):</span><br><span class="line">    img1 = cv.medianBlur(img, i)</span><br><span class="line">e2 = cv.getTickCount()</span><br><span class="line">t = (e2 - e1) / cv.getTickFrequency()</span><br><span class="line"><span class="built_in">print</span>(t)</span><br><span class="line"><span class="built_in">print</span>(cv.useOptimized())</span><br></pre></td></tr></table></figure>

<p>使用<code>IPython</code>时可以用它的命令<code>%timeit</code>非常方便地对每行代码用时进行分析<br>创建数组、单个或两个元素运算时，python直接运算以及opencv算法都比numpy快</p>
<p>性能优化方面的思路：首先以简单的方式实现算法，一旦算法开始工作，分析找到其瓶颈优化之</p>
<ol>
<li>尽可能避免在Python中使用循环</li>
<li>最大可能地将算法向量化，因为numpy和opencv都针对向量运算进行了优化</li>
<li>非必要不复制<code>array</code>，只使用其<code>views</code><br>如果代码还是慢，考虑用Cython</li>
</ol>
<p>附加资源</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://wiki.python.org/moin/PythonSpeed/PerformanceTips">Python Optimization Techniques</a></li>
<li><a target="_blank" rel="noopener" href="http://scipy-lectures.github.io/advanced/advanced_numpy/index.html#advanced-numpy">Scipy Lecture Notes - Advanced Numpy</a></li>
<li><a target="_blank" rel="noopener" href="http://pynash.org/2013/03/06/timing-and-profiling/">Timing and Profiling in IPython</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://debugtheuniverse.github.io/2024/03/20/OpenCV%20%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8/" data-id="cltyl7mrj0000uouk2kd75vha" data-title="OpenCV 快速使用" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-OpenCV VideoWriter" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/03/19/OpenCV%20VideoWriter/" class="article-date">
  <time class="dt-published" datetime="2024-03-19T09:12:17.069Z" itemprop="datePublished">2024-03-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/03/19/OpenCV%20VideoWriter/">OpenCV VideoWriter</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h4><p>Windows 11<br>python 3.12.2<br>opencv-contrib-python 4.9.0.80</p>
<h4 id="保存视频问题"><a href="#保存视频问题" class="headerlink" title="保存视频问题"></a>保存视频问题</h4><p>使用<code>VideoWriter</code>保存视频的时候结果只有1kb，显示文件已损坏。</p>
<h5 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建采集object</span></span><br><span class="line">cap = cv.VideoCapture(<span class="string">&#x27;video.mp4&#x27;</span>) <span class="comment"># 传入-1默认摄像头，也可是摄像头序号0/1/2，或视频文件名称</span></span><br><span class="line"></span><br><span class="line">frame_height = cap.get(<span class="number">3</span>)</span><br><span class="line">frame_width = cap.get(<span class="number">4</span>)</span><br><span class="line">size = (frame_width, frame_height)  <span class="comment"># 使用VideoWriter时输出必须与输入同尺寸</span></span><br><span class="line"></span><br><span class="line">writer = cv2.VideoWriter(<span class="string">&#x27;out.mov&#x27;</span>, cv2.VideoWriter_fourcc(*<span class="string">&#x27;divx&#x27;</span>), <span class="number">25.5</span>, size, isColor=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 输出格式亲测.avi .mov .mp4可用</span></span><br><span class="line"><span class="comment"># fourcc参数divx和mp4v都可用</span></span><br><span class="line"><span class="comment"># 帧率可以是浮点数</span></span><br><span class="line"><span class="comment"># 尺寸是个与源视频同样大小的元组则可用，顺序为（宽，高）</span></span><br><span class="line"><span class="comment"># 如果对图像进行了灰度处理，必须修改isColor为False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> cap.isOpened():</span><br><span class="line">    ret, frame = cap.read()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> ret:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;can\&#x27;t recieve frame, exiting...&#x27;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#frame = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)</span></span><br><span class="line">    out.write(frame)</span><br><span class="line"></span><br><span class="line">    cv2.imshow(<span class="string">&#x27;frame&#x27;</span>, frame)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) == <span class="built_in">ord</span>(<span class="string">&#x27;q&#x27;</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">cap.release()</span><br><span class="line">out.release()</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://debugtheuniverse.github.io/2024/03/19/OpenCV%20VideoWriter/" data-id="clty6czx000008cukehluh2a1" data-title="OpenCV VideoWriter" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-pyautogui" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/03/14/pyautogui/" class="article-date">
  <time class="dt-published" datetime="2024-03-13T16:03:46.394Z" itemprop="datePublished">2024-03-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/03/14/pyautogui/">pyautogui</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>pyautogui可以控制鼠标移动和点击，可以用来实现一些自动化的操作，非常有趣。</p>
<h4 id="先看注意事项"><a href="#先看注意事项" class="headerlink" title="先看注意事项"></a>先看注意事项</h4><p>为避免失控，快速甩动鼠标到屏幕角落以强行退出程序。</p>
<h4 id="一、控制鼠标"><a href="#一、控制鼠标" class="headerlink" title="一、控制鼠标"></a>一、控制鼠标</h4><h5 id="1-安装pyautogui"><a href="#1-安装pyautogui" class="headerlink" title="1. 安装pyautogui"></a>1. 安装pyautogui</h5><p>在Windows的cmd窗口输入指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyautogui</span><br></pre></td></tr></table></figure>

<h5 id="2-确认安装正常"><a href="#2-确认安装正常" class="headerlink" title="2. 确认安装正常"></a>2. 确认安装正常</h5><p>使用<code>pyautogui.size()</code>获取当前屏幕的宽高，返回是一个点对象。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyautogui</span><br><span class="line">wh = pyautogui.size()</span><br><span class="line"><span class="built_in">print</span>(wh.width, wh.height)</span><br></pre></td></tr></table></figure>

<h5 id="3-移动鼠标到绝对位置"><a href="#3-移动鼠标到绝对位置" class="headerlink" title="3. 移动鼠标到绝对位置"></a>3. 移动鼠标到绝对位置</h5><p>使用<code>pyautogui.moveTo()</code>可将光标移至屏幕任意位置，传入三个参数，前两个分别为位置坐标<code>x</code>与<code>y</code>，第三个<code>duration=</code>用来指定这个动作的耗时。<br>先了解一下计算机显示器的像素坐标系，屏幕左上为原点，x轴指向右侧，y轴指向屏幕底端。</p>
<center>
<img src="./assets/img/coordinate-system-of-screen.png" width="30%" height="30%">
图1 分辨率为1920x1080的屏幕坐标系图片<sup>[1]<sup>
</center>


<p>举个例子，让鼠标自动画长方形。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyautogui</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    pyautogui.moveTo(<span class="number">100</span>, <span class="number">100</span>, duration=<span class="number">0.25</span>)</span><br><span class="line">    pyautogui.moveTo(<span class="number">100</span>, <span class="number">400</span>, duration=<span class="number">0.25</span>)</span><br><span class="line">    pyautogui.moveTo(<span class="number">400</span>, <span class="number">400</span>, duration=<span class="number">0.25</span>)</span><br><span class="line">    pyautogui.moveTo(<span class="number">400</span>, <span class="number">100</span>, duration=<span class="number">0.25</span>)</span><br></pre></td></tr></table></figure>

<h5 id="4-移动鼠标到相对位置"><a href="#4-移动鼠标到相对位置" class="headerlink" title="4. 移动鼠标到相对位置"></a>4. 移动鼠标到相对位置</h5><p>使用<code>pyautogui.move()</code>，同样是三个参数，区别是坐标为相对位移坐标。<br>如果要获得鼠标当前位于何处，可以使用<code>pyautogui.positioin()</code>，没有参数，返回一个对象包含两个坐标值。</p>
<h5 id="5-控制鼠标点击"><a href="#5-控制鼠标点击" class="headerlink" title="5. 控制鼠标点击"></a>5. 控制鼠标点击</h5><p>让鼠标在坐标（100，100）处完成一次左键单击，使用<code>pyautogui.click()</code>，传入的第三个参数<code>button=</code>用来指定左键、中键和右键。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyautogui</span><br><span class="line">pyautogui.click(<span class="number">100</span>, <span class="number">100</span>, button=<span class="string">&#x27;left&#x27;</span>)    <span class="comment"># 点击左键</span></span><br><span class="line">pytutogui.click(<span class="number">100</span>, <span class="number">100</span>, button=<span class="string">&#x27;right&#x27;</span>)   <span class="comment"># 点击右键</span></span><br></pre></td></tr></table></figure>
<p>完成一次点击包括两个动作，也就是按下与释放。<code>pyautogui.click()</code>使用了默认的时间间隔。如果我们想要自定义按下和释放之间的保持时间，就使用<code>pyautogui.mouseDown()</code>来按下，用<code>pyautogui.mouseUp()</code>来释放，参数相同。</p>
<h5 id="6-拖动鼠标"><a href="#6-拖动鼠标" class="headerlink" title="6. 拖动鼠标"></a>6. 拖动鼠标</h5><p>按下后保持，再移动鼠标，可用<code>pyautogui.dragTo()</code>或者<code>pyautogui.drag()</code>实现，前者是绝对位置，后者为相对位置。<br>以下代码是用鼠标绘图的例子</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyautogui</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">5</span>)   <span class="comment"># 等待切换软件窗口</span></span><br><span class="line">pyautogui.click(<span class="number">800</span>, <span class="number">600</span>)   <span class="comment"># 点击画幅内的一点作为起点</span></span><br><span class="line"></span><br><span class="line">distance = <span class="number">500</span></span><br><span class="line">change = <span class="number">20</span></span><br><span class="line"><span class="keyword">while</span> distance &gt; <span class="number">0</span>:</span><br><span class="line">    pyautogui.drag(distance, <span class="number">0</span>, duration=<span class="number">0.2</span>)   <span class="comment"># Move right.</span></span><br><span class="line">    distance = distance - change</span><br><span class="line">    pyautogui.drag(<span class="number">0</span>, distance, duration=<span class="number">0.2</span>)   <span class="comment"># Move down.</span></span><br><span class="line">    pyautogui.drag(-distance, <span class="number">0</span>, duration=<span class="number">0.2</span>)  <span class="comment"># Move left.</span></span><br><span class="line">    distance = distance - change</span><br><span class="line">    pyautogui.drag(<span class="number">0</span>, -distance, duration=<span class="number">0.2</span>) </span><br></pre></td></tr></table></figure>
<p>事先打开一个绘图软件，此处以windows绘图软件为例，选择好画笔后回到IDE启动脚本。程序中有一个5s的延时，因此启动程序后5s内将实现准备好的绘图软件窗口最大化。</p>
<center>
<img src="./assets/img/drag-painting.png" width="60%" height="60%">
图2 pyautogui.drag()拖动鼠标绘制图形的结果
</center>

<h5 id="7-控制滚轮"><a href="#7-控制滚轮" class="headerlink" title="7. 控制滚轮"></a>7. 控制滚轮</h5><p>使用<code>pyautogui.scroll()</code>输入参数为整数滚动单位。</p>
<h5 id="8-获取屏幕上某一点的像素坐标"><a href="#8-获取屏幕上某一点的像素坐标" class="headerlink" title="8. 获取屏幕上某一点的像素坐标"></a>8. 获取屏幕上某一点的像素坐标</h5><p>使用snipaste软件，启动在后台运行，需要时点击F1进入截图预览模式，此时鼠标所处的位置会有坐标值显示。<br>或者使用<code>pyautogui.displayMousePosition()</code>实时显示位置和颜色信息。</p>
<h5 id="9-获取屏幕图像信息"><a href="#9-获取屏幕图像信息" class="headerlink" title="9. 获取屏幕图像信息"></a>9. 获取屏幕图像信息</h5><p>使用<code>pyautogui.screenshot()</code>获取全屏截图。使用<code>pyautogui.pixel(x, y)</code>获取某个像素点的颜色信息输入两个坐标值。<br>判断某个点是否与给定颜色一致，可用<code>pyautogui.pixelMatchesColor(x, y, (R, G, B))</code>，输入两个坐标值，和一个包含RGB信息的元组。<br>判断给定的图片在屏幕上的哪个位置，可用<code>pyautogui.locateOnScreen(&#39;img.jpg&#39;)</code>，传入参数为图片路径，返回xywh元组，可能有多个。如果想要点击这个区域的中心，将该元组传入<code>pyautogui.click((x, y, w, h))</code>即可。甚至可以直接这样<code>pyautogui.click(&#39;img.jpg&#39;)</code>实现查找和点击，但是有可能不成功，需和<code>try</code>以及<code>except</code>一起用。</p>
<h5 id="10-获取窗口信息"><a href="#10-获取窗口信息" class="headerlink" title="10. 获取窗口信息"></a>10. 获取窗口信息</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyautogui</span><br><span class="line">fw = pyautogui.getActiveWindow() <span class="comment"># 获取活动的窗口信息</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(fw))  <span class="comment"># &lt;Win32Window left=&quot;-12&quot;, top=&quot;-12&quot;, width=&quot;2584&quot;, height=&quot;1540&quot;, title=&quot;test.py - Visual Studio Code&quot;&gt;</span></span><br><span class="line"></span><br><span class="line">pyautogui.getAllWindows() <span class="comment"># 返回一个list，包含所有的窗口信息</span></span><br><span class="line"></span><br><span class="line">pyautogui.getWindowsAt(x, y) <span class="comment"># 输入xy坐标，返回包含坐标的所有窗口</span></span><br><span class="line"></span><br><span class="line">pyautogui.getWindowsWithTitle(title) <span class="comment"># 输入title，返回对应的窗口</span></span><br><span class="line"></span><br><span class="line">pyautogui.getAllTitles() <span class="comment"># 获取所有的串口标题，返回是一个list，元素为string</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>对获取到的窗口可以进行一些操作</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fw.width = <span class="number">1000</span> <span class="comment"># 将窗口宽度调整为1000像素</span></span><br><span class="line"></span><br><span class="line">fw.topleft = (<span class="number">200</span>, <span class="number">200</span>) <span class="comment"># 将窗口左上角移动到指定位置</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(fw.isMaximized) <span class="comment"># 判断窗口是否为最大化</span></span><br><span class="line"></span><br><span class="line">fw.maximize() <span class="comment"># 最大化窗口</span></span><br><span class="line"></span><br><span class="line">fw.minimize() <span class="comment"># 最小化窗口</span></span><br><span class="line"></span><br><span class="line">fw.restore()  <span class="comment"># 恢复最大化/最小化操作</span></span><br></pre></td></tr></table></figure>
<p>完整的使用方法，见官方文档<a target="_blank" rel="noopener" href="https://pyautogui.readthedocs.io/">https://pyautogui.readthedocs.io/</a></p>
<h4 id="二、控制键盘"><a href="#二、控制键盘" class="headerlink" title="二、控制键盘"></a>二、控制键盘</h4><h5 id="1-输入内容"><a href="#1-输入内容" class="headerlink" title="1. 输入内容"></a>1. 输入内容</h5><p>首先通过点击确定文字输入区域，再用<code>pyautogui.write()</code>输入。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyautogui</span><br><span class="line">pyautogui.click(<span class="number">1080</span>,<span class="number">1400</span>)</span><br><span class="line">pyautogui.write(<span class="string">&#x27;hello world!&#x27;</span>) <span class="comment"># pyautogui输入&#x27;!&#x27;时会自动按下shift键</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用list传入时可以将键盘上的所有键以名称方式描述，如&#x27;left&#x27;表←键</span></span><br><span class="line">pyautogui.write([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;left&#x27;</span>, <span class="string">&#x27;left&#x27;</span>, <span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;Y&#x27;</span>]) <span class="comment"># 按顺序按下a、b、←、←、shift+x、shift+y 结果 XYab</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>键盘对应的内容表格如下</p>
<table>
<thead>
<tr>
<th>键盘关键字</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>‘a’, ‘b’, ‘c’, ‘A’, ‘B’, ‘C’, ‘1’, ‘2’, ‘3’, ‘!’, ‘@’, ‘#’等</td>
<td>单字符按键</td>
</tr>
<tr>
<td>‘enter’ (或 ‘return’ 或 ‘\n’)</td>
<td>回车键</td>
</tr>
<tr>
<td>‘esc’</td>
<td>ESC键</td>
</tr>
<tr>
<td>‘shiftleft’, ‘shiftright’</td>
<td>左右SHIFT键</td>
</tr>
<tr>
<td>‘altleft’, ‘altright’</td>
<td>左右ALT键</td>
</tr>
<tr>
<td>‘ctrlleft’, ‘ctrlright’</td>
<td>左右CTRL键</td>
</tr>
<tr>
<td>‘tab’ (或 ‘\t’)</td>
<td>TAB键</td>
</tr>
<tr>
<td>‘backspace’, ‘delete’</td>
<td>BACKSPACE 和 DELETE键</td>
</tr>
<tr>
<td>‘pageup’, ‘pagedown’</td>
<td>PAGE UP 和 PAGE DOWN 键</td>
</tr>
<tr>
<td>‘home’, ‘end’</td>
<td>HOME 和 END 键</td>
</tr>
<tr>
<td>‘up’, ‘down’, ‘left’, ‘right’</td>
<td>up, down, left 和 right 箭头键</td>
</tr>
<tr>
<td>‘f1’, ‘f2’, ‘f3’, 等</td>
<td>F1 到 F12 键</td>
</tr>
<tr>
<td>‘volumemute’, ‘volumedown’, ‘volumeup’</td>
<td>静音，音量减，音量加键（有些键盘没有这些键，但是你的电脑可以接收这些指令）</td>
</tr>
<tr>
<td>‘pause’</td>
<td>PAUSE键</td>
</tr>
<tr>
<td>‘capslock’, ‘numlock’, ‘scrolllock’</td>
<td>CAPS LOCK, NUM LOCK, 和 SCROLL LOCK 键</td>
</tr>
<tr>
<td>‘insert’</td>
<td>INS 或 INSERT 键</td>
</tr>
<tr>
<td>‘printscreen’</td>
<td>PRTSC 或 PRINT SCREEN 键</td>
</tr>
<tr>
<td>‘winleft’, ‘winright’</td>
<td>左右WIN键(Windows)</td>
</tr>
<tr>
<td>‘command’</td>
<td>Command键(macOS)</td>
</tr>
<tr>
<td>‘option’</td>
<td>OPTION键(on macOS)</td>
</tr>
</tbody></table>
<h5 id="2-热键组合"><a href="#2-热键组合" class="headerlink" title="2. 热键组合"></a>2. 热键组合</h5><p>与鼠标相似，我们可以用<code>pyautogui.keyDown()</code>和<code>pyautogui.keyUp()</code>来分开控制键盘的按下与释放。<br>如在windows上实现一次复制粘贴，可以如下操作</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pyautogui.keyDown(<span class="string">&#x27;ctrl&#x27;</span>)</span><br><span class="line">pyautogui.keyDown(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">pyautogui.keyUp(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">pyautogui.keyUp(<span class="string">&#x27;ctrl&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>但是上面的操作未免有些复杂了，同样的操作可以这样</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyautogui.hotkey(<span class="string">&#x27;ctrl&#x27;</span>, <span class="string">&#x27;c&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="3-使用提示"><a href="#3-使用提示" class="headerlink" title="3. 使用提示"></a>3. 使用提示</h5><ul>
<li>屏幕分辨率保持不便</li>
<li>应用窗口应该最大化，因为这样才能保证按钮始终在同一个位置</li>
<li>根据软件反应速度多给一些延时，你不会想在上一个动作没有完成就开始点击</li>
<li>使用<code>locateOnScreen()</code>寻找按钮，尽量不依赖xy坐标，在没发现目标时停止比乱点击要好</li>
<li>使用<code>getWindowsWithTitle()</code>确保你准备控制的应用程序窗口是存在的，用<code>activate()</code>让窗口进入前台</li>
<li>增加尽可能多的检查，如弹窗、断网的情况怎么处理</li>
<li>第一次运行时要完整地观察是否正常</li>
</ul>
<p>给延时的两个例子</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">time.sleep(<span class="number">3</span>)   <span class="comment"># 等待3s</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pyautogui</span><br><span class="line">pyautogui.countdown(<span class="number">10</span>) <span class="comment"># 等待10s，在命令行倒数输出10、9、8...</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>另外可以用<code>pyautogui.alert(&#39;text&#39;)</code>或<code>pyautogui.confirm(&#39;text&#39;)</code>来弹窗确认。如果需要使用到剪贴板里面的内容，需要用到<code>import pyperclip</code>然后<code>pyperclip.paste()</code></p>
<blockquote>
<p>关于计算机道德<br>为善去恶，学会这项技术的目的应该是提高自己的生产效率，勿做有损他人的事情。</p>
</blockquote>
<h4 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h4><p>[1] <a target="_blank" rel="noopener" href="https://automatetheboringstuff.com/2e/chapter20/">Automate The Boring Stuff, Al Sweigart</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://debugtheuniverse.github.io/2024/03/14/pyautogui/" data-id="cltse7fc20000wkukdvvh8w6f" data-title="pyautogui" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-你好世界" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/03/11/%E4%BD%A0%E5%A5%BD%E4%B8%96%E7%95%8C/" class="article-date">
  <time class="dt-published" datetime="2024-03-11T12:51:38.823Z" itemprop="datePublished">2024-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/03/11/%E4%BD%A0%E5%A5%BD%E4%B8%96%E7%95%8C/">你好世界！</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>欢迎来到黄河水澄的技术专栏！<br>这里会分享我学习过程中的一些技术笔记，目的是督促自己学习、分享有用的知识。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://debugtheuniverse.github.io/2024/03/11/%E4%BD%A0%E5%A5%BD%E4%B8%96%E7%95%8C/" data-id="cltmz32ci0000wsukh49adlx5" data-title="你好世界！" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/03/20/OpenCV%20%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/">OpenCV 图像处理</a>
          </li>
        
          <li>
            <a href="/2024/03/20/OpenCV%20%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8/">OpenCV 快速使用</a>
          </li>
        
          <li>
            <a href="/2024/03/19/OpenCV%20VideoWriter/">OpenCV VideoWriter</a>
          </li>
        
          <li>
            <a href="/2024/03/14/pyautogui/">pyautogui</a>
          </li>
        
          <li>
            <a href="/2024/03/11/%E4%BD%A0%E5%A5%BD%E4%B8%96%E7%95%8C/">你好世界！</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Jim Huang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>